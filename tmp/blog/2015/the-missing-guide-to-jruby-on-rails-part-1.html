<!doctype html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta content='IE=edge;chrome=1' http-equiv='X-UA-Compatible'>
    <title>
      Blog Title - The Missing Guide to JRuby on Rails Part 1
    </title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/blog/feed.xml" />
    <link href="/stylesheets/all.css" rel="stylesheet" />
    <script src="/javascripts/all.js"></script>
  </head>
  <body>
    <nav class='navbar navbar-light bg-faded'>
      <a class='navbar-brand' href='#'>ChaseGilliam.io</a>
      <ul class='nav navbar-nav'>
        <li class='nav-item active'>
          <a class='nav-link' href='#'>Home</a>
        </li>
        <li class='nav-item'>
          <a class='nav-link' href='#'>About</a>
        </li>
        <li class='nav-item'>
          <a class='nav-link' href='#'>Contact Me</a>
        </li>
      </ul>
    </nav>
    <div class='container'>
      <div class='col-xs-12 col-md-8'>
        <h1>The Missing Guide to JRuby on Rails Part 1</h1>
        <p>
          <p>Ruby on Rails is a great application framework with a lot of advantages that are well documented elsewhere Occasionally, however, you may find yourself looking for a few tools just outside of the Rails toolbox. In some of those cases, <a href="http://jruby.org/">JRuby</a> can provide some additional options without giving up the expressiveness of Ruby or the fast prototyping and sane conventions of Rails.</p>
          
          <p><strong>Reasons to use Rails</strong>
          + Real Concurrency
          + Java Interoperability
          + Large gains in speed <em>(once the JVM has warmed up)</em>
          + Excellent tooling around the JVM</p>
          
          <p>These are all great reasons, especially concurrency and gains in speed. With a bit of discipline and a little trail and error, the average Rails developer can realize these benefits without giving up everything the ecosystem affords. Real threads used with application servers like <a href="http://puma.io/">Puma</a> can allow more simultaneous connections to a single server instance, which can save money and resources over time. For the purposes of this multi-part tutorial we will be using Puma, but there are a number of great <a href="https://github.com/jruby/jruby/wiki/Servers">options</a> <em>(note: some options listed on the JRuby page are deprecated, dead, or otherwise ill-suited to Rails development)</em>.</p>
          
          <p><em>The following assumes you are using OSX, but Ubuntu et.al. should also work basically the same way.</em></p>
          
          <p><strong>Let&#39;s get started from the very beginning:</strong></p>
          
          <ol>
          <li><p>install RVM
          <code>
          \curl -sSL https://get.rvm.io | bash
          </code></p></li>
          <li><p>Check for Rubies
          <code>
          rvm list known
          </code>
          Find the JRuby section and highlight <code>jruby-9.0.0.0.pre1</code></p></li>
          <li><p>Install JRuby
          <code>
          rvm install jruby-9.0.0.0.pre1
          </code>
          This will likely take a few minutes, so go make a cup of coffee or tea.</p></li>
          <li><p>Once that is done run:
          <code>
          rvm list
          </code>
          This will show you all of your installed rubies. If jruby-9.0.0.0.pre1 isn&#39;t on the list then try step 3 again, possibly running <code>rvm uninstall jruby-9.0.0.0.pre1</code> first. If jruby-9.0.0.0.pre1 isn&#39;t proceeded by either <code>=&gt;</code> or <code>=*</code> then run <code>rvm default use jruby-9.0.0.0.pre1</code> to set JRuby 9k as your current and default Ruby.</p></li>
          <li><p>Next, install Rails for JRuby
          <code>
          gem install rails -v &#39;4.1.9&#39; --platform jruby
          </code>
          As of the writing of this post, the <code>activerecord-jdbc-adapter</code> for Postgres does not work with <code>Active Record &gt;= 4.2</code>, so we&#39;ll have to make due with `<code>Rails 4.1.9</code> until <a href="https://github.com/jruby/activerecord-jdbc-adapter/issues/599">this</a> issue gets addressed. When this changes I&#39;ll update the post.</p></li>
          <li><p>Start a new Rails project with JRuby
          <code>
          rails _4.1.9_ new jruby_rails_tutorial --database=postgresql
          </code>
          If you are still using JRuby as your current ruby, then all of the correct JRuby boilerplate should be setup here. If you see <code>Using activerecord-jdbcpostgresql-adapter x.x.x</code> in the console, then you&#39;re on the right track.</p></li>
          </ol>
          
          <p>Some notes about this command:
             + <code>_4.1.9_</code> specifies the version of Rails in case you have multiple versions installed.
             + <code>--database=postgresql</code> sets the database as Postgres
             + There is no need to run <code>Jruby -S</code> before <code>rails new</code> since you&#39;re using RVM.
          7. Next <code>cd</code> into you app directory and spin up the server</p>
          
          <p>run the server as follows:
          <code>
          rails server
          </code>
             This will take a few seconds as the JVM starts up and WEBrick boots.</p>
          
          <ol>
          <li>Visit the app at <a href="http://localhost:3000">http://localhost:3000</a></li>
          </ol>
          
          <p><strong><em>Good Job, you&#39;re doing JRuby on Rails</em></strong></p>
          
          <p>You can find the code so far on <a href="https://github.com/Ch4s3/jruby_rails_tutorial/tree/step0">GitHub</a>.</p>
          
          <h2>Part 2 is Coming Soon.</h2>
        </p>
      </div>
      <div class='col-xs-12 col-md-4'>
        <div class='card m-t-lg'>
          <div class='img-container'>
            <img class='card-img-top' src='/images/bike_bridge.jpg'>
          </div>
          <img alt='chase avatar' class='avatar' height='90px' src='/images/profile.jpg' width='90px'>
          <div class='card-block m-t-lg'>
            <h4 class='card-title text-center'>Chase Gilliam</h4>
            <p class='card-text'>Writing Ruby, Java & Elixir in Baltimore</p>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
